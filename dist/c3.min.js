var c3=function(){function g(a,b){return a===b}function h(b){return g(b,a)}function i(a,b){if(a!==b.type)throw"invalid type: expected '"+a+"', "+"received '"+b.type+"'"}function j(a){return parseInt(a,10)}function k(a){return i("piece",a),c3.square(a.size,a.playerId)}function l(a){return JSON.stringify(a)}function m(a){return JSON.parse(a)}function n(a,b){return f[a][b]}function o(){c3.game.addResetNotification(c3.board.reset),c3.game.addResetNotification(c3.ui.run),c3.game.reset()}"use strict";var a=-1,b="a",c="A",d="b",e="B",f=[[b,d],[c,e]];return{none:a,player1:0,player2:1,smallPiece:0,largePiece:1,isNone:h,equals:g,ensureType:i,toInt:j,toSquare:k,serialize:l,deserialize:m,getContent:n,init:o}}();c3.player=function(a){function c(c){return c3.ensureType(b,c),c3.equals(a,c.id)}"use strict";var b="player";return{type:b,id:a,equals:c}},c3.piece=function(a,b){function g(c){return c?"":"piece-"+a+" player-"+b}function h(c){return c?0:c3.getContent(a,b)}function i(){return c3.isNone(a)||c3.isNone(b)}function j(d){return c3.ensureType(c,d),c3.equals(a,d.size)&&c3.equals(b,d.playerId)}function k(){return a===c3.none?c3.smallPiece:c3.largePiece}"use strict";var c="piece",d,e,f;return f=i(),d=h(f),e=g(f),{type:c,content:d,className:e,size:a,playerId:b,isNoPiece:f,equals:j,getNextSize:k}},c3.square=function(a,b){return"use strict",{type:"square",playerId:b,size:a}},c3.game=function(a){function g(){c=a.serialize({type:b,playerId:d,squares:e})}function h(a){f.push(a)}function i(a){d=a,g()}function j(a,b){e[a]=b,g()}function k(){return a.deserialize(c)}function l(h){var i=f.length-1;a.ensureType(b,h);if(a.equals(c,a.serialize(h)))return;d=h.playerId,e=h.squares,g();if(i>0)while(i>=0)f[i].call(null,h),i-=1}function m(){var c;for(c=0;c<9;c+=1)e[c]=c3.square(a.none,a.none);l({type:b,playerId:a.player1,squares:e})}"use strict";var b="game",c=null,d=a.player1,e=[],f=[];return{get:k,set:l,reset:m,saveCurrentPlayerId:i,saveSquare:j,addResetNotification:h}}(c3),c3.board=function(a){function c(a){return b[a]}function d(c,d,e){b[c]=d,e.saveSquare(c,a.toSquare(d)),e.saveCurrentPlayerId(a.equals(d.playerId,a.player1)?a.player2:a.player1)}function e(b){return a.ensureType("square",b),a.piece(b.size,b.playerId)}function f(a){var c=a.squares,d;for(d=0;d<9;d+=1)b[d]=e(c[d])}"use strict";var b=[];return{getSquarePiece:c,setSquarePiece:d,reset:f}}(c3),c3.ui=function(a,b,c,d){function g(a,e,f){c.setSquarePiece(a,b.piece(e,f),d)}function h(b,c,d){a("#"+b).text(d.content).removeClass(c.className).addClass(d.className)}function i(e){var f,i;f=c.getSquarePiece(e),i=b.piece(f.getNextSize(),d.get().playerId),g(e,i.size,i.playerId),h(e,f,i),i.size===b.largePiece&&a("#"+e).off("click").removeClass("sqr").addClass("sqr-off")}function j(){f.on("click",function(a){i(b.toInt(a.target.id)),e.css("cursor","pointer")}),f.mousedown(function(a){a.originalEvent.preventDefault?a.originalEvent.preventDefault():event.returnValue=!1}),e.fadeIn("slow")}"use strict";var e=a("#gridContainer"),f=a(".sqr");return{run:j,clickSquare:i}}(jQuery,c3,c3.board,c3.game);