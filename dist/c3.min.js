var c3=function(){function g(a,b){return a===b}function h(b){return g(b,a)}function i(a,b){if(a!==b.type)throw"invalid type: expected '"+a+"', "+"received '"+b.type+"'"}function j(a){return parseInt(a,10)}function k(a){return i("piece",a),c3.square(a.size,a.playerId)}function l(a){return JSON.stringify(a)}function m(a){return JSON.parse(a)}function n(a,b){return f[a][b]}"use strict";var a=-1,b="a",c="A",d="b",e="B",f=[[b,d],[c,e]];return{none:a,player1:0,player2:1,smallPiece:0,largePiece:1,isNone:h,equals:g,ensureType:i,toInt:j,toSquare:k,serialize:l,deserialize:m,getContent:n}}();c3.player=function(a){function c(c){return c3.ensureType(b,c),c3.equals(a,c.id)}"use strict";var b="playerId";return{type:b,id:a,equals:c}},c3.piece=function(a,b){function g(c){return c?"":"piece-"+a+" player-"+b}function h(c){return c?0:c3.getContent(a,b)}function i(){return c3.isNone(a)||c3.isNone(b)}function j(d){return c3.ensureType(c,d),c3.equals(a,d.size)&&c3.equals(b,d.playerId)}function k(){return a===c3.none?c3.smallPiece:c3.largePiece}"use strict";var c="piece",d,e,f;return f=i(),d=h(f),e=g(f),{type:c,content:d,className:e,size:a,playerId:b,isNoPiece:f,equals:j,getNextSize:k}},c3.square=function(a,b){return"use strict",{type:"square",playerId:b,size:a}},c3.game=function(a){function g(){c=a.serialize({type:b,playerId:d,squares:e})}function h(a){f=a}function i(a){d=a,g()}function j(a,b){e[a]=b,g()}function k(){return a.deserialize(c)}function l(h){a.ensureType(b,h);if(a.equals(c,a.serialize(h)))return;d=h.playerId,e=h.squares,g(),f!==null&&f(h)}function m(){var c;for(c=0;c<9;c++)e[c]=c3.square(a.none,a.none);l({type:b,playerId:a.player1,squares:e})}"use strict";var b="game",c=null,d=a.player1,e=[],f=null;return{get:k,set:l,reset:m,saveCurrentPlayerId:i,saveSquare:j,addResetNotification:h}}(c3),c3.board=function(a){function c(b){return a.player(b.playerId)}function d(a,b){b.saveCurrentPlayerId(a.id)}function e(a){return b[a]}function f(a,c,d){b[a]=c,d.saveSquare(a,c3.toSquare(c))}function g(b){return a.ensureType("square",b),a.piece(b.size,b.playerId)}function h(a){var c=a.squares,d;for(d=0;d<9;d++)b[d]=g(c[d])}"use strict";var b=[];return{getSquarePiece:e,setSquarePiece:f,getCurrentPlayer:c,setCurrentPlayer:d,reset:h}}(c3),c3.ui=function(a,b,c,d){function g(a,e,f){c.setSquarePiece(a,b.piece(e,f),d)}function h(b,c,d){a("#"+b).text(d.content).removeClass(c.className).addClass(d.className)}function i(a){var e=c.getSquarePiece(a),f=b.piece(e.getNextSize(),d.get().playerId);g(a,f.size,f.playerId),h(a,e,f)}function j(a){i(a)}function k(){f.click(function(a){j(b.toInt(a.target.id)),e.css("cursor","pointer")}),f.mousedown(function(a){a.originalEvent.preventDefault?a.originalEvent.preventDefault():event.returnValue=!1}),e.fadeIn("slow")}"use strict";var e=a("#gridContainer"),f=a(".sqr");return{run:k,clickSquare:j}}(jQuery,c3,c3.board,c3.game);