var c3=function(){function b(a,b){return a===b}function c(c){return b(c,a)}function d(a,b){if(a!==b.type)throw"invalid type: expected '"+a+"', "+"received '"+b.type+"'"}function e(a){return parseInt(a,10)}function f(a){return d("piece",a),c3.square.get(a.size,a.player.id)}function g(a){return d("square",a),c3.piece.get(a.sz,c3.player.get(a.pl))}function h(a){return JSON.stringify(a)}function i(a){return JSON.parse(a)}"use strict";var a=-1;return{none:a,player1:0,player2:1,smallPiece:0,largePiece:1,player1SmallPiece:"a",player1LargePiece:"A",player2SmallPiece:"b",player2LargePiece:"B",isNone:c,equals:b,ensureType:d,toInt:e,toPiece:g,toSquare:f,serialize:h,deserialize:i}}();c3.player=function(a,b){function d(d){return a.ensureType(c,d),a.equals(b,d.id)}"use strict";var c="player";return{type:c,id:b,equals:d}},c3.piece=function(a,b,c){function i(c){return c?"":"piece-"+a+" player-"+b.id}function j(c){return c?0:h[a][b.id]}function k(){return c.isNone(a)||c.isNone(b.id)}function l(e){return c.ensureType(d,e),c.equals(a,e.size)&&b.equals(e.player)}function m(){return a===c.none?c.smallPiece:c.largePiece}"use strict";var d="piece",e,f,g,h=[[c.player1SmallPiece,c.player2SmallPiece],[c.player1LargePiece,c.player2LargePiece]];return g=k(),e=j(g),f=i(g),{type:d,content:e,className:f,size:a,player:b,isNoPiece:g,equals:l,getNextSize:m}},c3.square=function(a,b){return"use strict",{type:"square",pl:b,sz:a}},c3.game=function(a){function g(){c=a.serialize({type:b,playerId:d,squares:e})}function h(a){f=a}function i(a){d=a,g()}function j(a,b){e[a]=b,g()}function k(){return a.deserialize(c)}function l(h){a.ensureType(b,h);if(a.equals(c,a.serialize(h)))return;d=h.playerId,e=h.squares,g(),f!==null&&f(h)}function m(){var c;for(c=0;c<9;c++)e[c]=c3.square(a.none,a.none);l({type:b,playerId:a.player1,squares:e})}"use strict";var b="game",c=null,d=a.player1,e=[],f=null;return{get:k,set:l,reset:m,saveCurrentPlayerId:i,saveSquare:j,addResetNotification:h}}(c3,c3.square),c3.board=function(a){function c(b){return c3.player(b.playerId,a)}function d(a,b){b.saveCurrentPlayerId(a.id)}function e(a){return b[a]}function f(a,c,d){b[a]=c,d.saveSquare(a,c3.toSquare(c))}function g(a){var c=a.squares,d;for(d=0;d<9;d++)b[d]=c3.toPiece(c[d])}"use strict";var b=[];return{getSquarePiece:e,setSquarePiece:f,getCurrentPlayer:c,setCurrentPlayer:d,reset:g}}(c3),c3.ui=function(a,b,c,d,e){function h(a,b){c3.board.setSquarePiece(a,c.get(b,c3.player.one),e)}function i(b,c,d){a("#"+b).text(d.content).removeClass(c.className).addClass(d.className)}function j(a){var b=d.getSquarePiece(a),f=c.get(c.getNextSize(b),d.getCurrentPlayer(e.get()));h(a,f.size),i(a,b,f)}function k(a){j(a)}function l(){g.click(function(a){k(b.toInt(a.target.id)),f.css("cursor","pointer")}),g.mousedown(function(a){a.originalEvent.preventDefault?a.originalEvent.preventDefault():event.returnValue=!1}),f.fadeIn("slow")}"use strict";var f=a("#gridContainer"),g=a(".sqr");return{run:l,clickSquare:k}}(jQuery,c3,c3.piece,c3.board,c3.game);